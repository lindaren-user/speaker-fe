import{Z as L,M as _,aj as B,ba as C,b_ as w,al as R,l as h,b$ as j,b as A,P as x,a2 as N,a0 as q,an as y,c2 as U,e as o,a4 as F,c4 as T,c3 as H,cu as I,aq as K,cv as s}from"./index-D4QMGDdD.js";const O=Symbol(),V=()=>L(O,null),[Y,d,Z]=R("list"),$={error:Boolean,offset:w(300),loading:Boolean,disabled:Boolean,finished:Boolean,scroller:Object,errorText:String,direction:C("down"),loadingText:String,finishedText:String,immediateCheck:B};var z=_({name:Y,props:$,emits:["load","update:error","update:loading"],setup(e,{emit:u,slots:a}){const l=h(e.loading),f=h(),v=h(),c=V(),M=j(f),m=A(()=>e.scroller||M.value),n=()=>{F(()=>{if(l.value||e.finished||e.disabled||e.error||(c==null?void 0:c.value)===!1)return;const{direction:t}=e,r=+e.offset,i=T(m);if(!i.height||H(f))return;let g=!1;const b=T(v);t==="up"?g=i.top-b.top<=r:g=b.bottom-i.bottom<=r,g&&(l.value=!0,u("update:loading",!0),u("load"))})},S=()=>{if(e.finished){const t=a.finished?a.finished():e.finishedText;if(t)return o("div",{class:d("finished-text")},[t])}},P=()=>{u("update:error",!1),n()},k=()=>{if(e.error){const t=a.error?a.error():e.errorText;if(t)return o("div",{role:"button",class:d("error-text"),tabindex:0,onClick:P},[t])}},E=()=>{if(l.value&&!e.finished&&!e.disabled)return o("div",{class:d("loading")},[a.loading?a.loading():o(I,{class:d("loading-icon")},{default:()=>[e.loadingText||Z("loading")]})])};return x(()=>[e.loading,e.finished,e.error],n),c&&x(c,t=>{t&&n()}),N(()=>{l.value=e.loading}),q(()=>{e.immediateCheck&&n()}),y({check:n}),U("scroll",n,{target:m,passive:!0}),()=>{var t;const r=(t=a.default)==null?void 0:t.call(a),i=o("div",{ref:v,class:d("placeholder")},null);return o("div",{ref:f,role:"feed",class:d(),"aria-busy":l.value},[e.direction==="down"?r:i,E(),S(),k(),e.direction==="up"?r:i])}}});const G=K(z),J={getAllModels:()=>s.get("/api/modelList"),updateModel:e=>s.put("/api/updateModel",e),addModel:e=>s.post("/api/addModel",e),deleteModel:e=>s.delete("/api/deleteModel",e),trainModel:e=>s.get("/api/train",e)};export{G as L,O as T,J as m};
