import{Q as C,J as T,b as M,C as w,ab as R,bL as y,bK as K,ad as N,l as b,bM as U,I as x,V as j,T as I,af as Q,bP as V,e as l,X as Y,bR as S,bQ as q,cw as F,ai as H,cx as c}from"./index-8BGEKXL5.js";const J=Symbol(),P=Symbol(),L=()=>C(P,null),W=e=>{const n=L();T(J,e),T(P,M(()=>(n==null||n.value)&&e.value))},[O,d,X]=N("list"),z={error:Boolean,offset:K(300),loading:Boolean,disabled:Boolean,finished:Boolean,scroller:Object,errorText:String,direction:y("down"),loadingText:String,finishedText:String,immediateCheck:R};var D=w({name:O,props:z,emits:["load","update:error","update:loading"],setup(e,{emit:n,slots:a}){const r=b(e.loading),f=b(),h=b(),u=L(),k=U(f),v=M(()=>e.scroller||k.value),i=()=>{Y(()=>{if(r.value||e.finished||e.disabled||e.error||(u==null?void 0:u.value)===!1)return;const{direction:t}=e,s=+e.offset,o=S(v);if(!o.height||q(f))return;let g=!1;const m=S(h);t==="up"?g=o.top-m.top<=s:g=m.bottom-o.bottom<=s,g&&(r.value=!0,n("update:loading",!0),n("load"))})},_=()=>{if(e.finished){const t=a.finished?a.finished():e.finishedText;if(t)return l("div",{class:d("finished-text")},[t])}},A=()=>{n("update:error",!1),i()},E=()=>{if(e.error){const t=a.error?a.error():e.errorText;if(t)return l("div",{role:"button",class:d("error-text"),tabindex:0,onClick:A},[t])}},B=()=>{if(r.value&&!e.finished&&!e.disabled)return l("div",{class:d("loading")},[a.loading?a.loading():l(F,{class:d("loading-icon")},{default:()=>[e.loadingText||X("loading")]})])};return x(()=>[e.loading,e.finished,e.error],i),u&&x(u,t=>{t&&i()}),j(()=>{r.value=e.loading}),I(()=>{e.immediateCheck&&i()}),Q({check:i}),V("scroll",i,{target:v,passive:!0}),()=>{var t;const s=(t=a.default)==null?void 0:t.call(a),o=l("div",{ref:h,class:d("placeholder")},null);return l("div",{ref:f,role:"feed",class:d(),"aria-busy":r.value},[e.direction==="down"?s:o,B(),_(),E(),e.direction==="up"?s:o])}}});const Z=H(D),$={getAllModels:()=>c.get("/api/modelList"),updateModel:e=>c.put("/api/updateModel",e),addModel:e=>c.post("/api/addModel",e),deleteModel:e=>c.delete("/api/deleteModel",e),trainModel:e=>c.get("/api/train",e)};export{Z as L,$ as m,W as u};
